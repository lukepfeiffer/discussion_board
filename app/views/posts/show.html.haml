#show_post
  %h1= post.title
  .post-content
    .video= raw post.embed_url.html_safe
    .content
      %p.publisher
        %span.author= post.user.username if post.user.present?
        &bull;
        %span.date= post.publish_date.strftime("%B %-d, %Y" )
      = link_to posts_path(course_code: post.course.course_code) do
        %p.course= post.course.course_code
      %p.description= post.description

    - if current_user.present? && current_user.is_admin?
      .actions
        = link_to 'Edit', edit_post_path(post.id), class: 'edit'
        = link_to 'Delete', post_path(post.id), method: :delete, class: 'delete'
  - if current_user.present?
    .form
      = form_for comment do |f|
        %fieldset
          %dl
            = f.hidden_field :post_id, value: post.id
            %dd= f.text_area :body, placeholder: "Add comment..."
        %fieldset.actions
          = f.submit 'Post', class: 'post_comment'
  %h2
    Comments &bull;
    = post.comments.count
  .comments-container
    - comments.each do |comment|
      .comment
        %p.username= comment.user.username + ":"
        %p.content= comment.body
        %a

          // Does not work currently
          %p
            %span.reply-button{data: {id: comment.id}} Reply
            &bull;
            %span.like-buttons
              %i.fa.fa-thumbs-o-up{data: {id: comment.id, vote_count: comment.vote_count(comment.votes), url: like_path(comment_id: comment.id)}}
              %i.fa.fa-thumbs-o-down{data: {id: comment.id, vote_count: comment.vote_count(comment.votes), url: dislike_path(comment_id: comment.id)}}
              %span{class: "vote-count#{comment.id}", data: {id: comment.id}}= "+ " + comment.vote_count(comment.votes).to_s
        - if current_user.present?
          .form.hidden{data: {id: comment.id}}
            = form_for reply_comment do |f|
              %fieldset
                %dl
                  = f.hidden_field :post_id, value: post.id
                  %dd= f.text_area :body, placeholder: "Add comment..."
              %fieldset.actions
                = f.submit 'Post Comment', class: 'post_comment'
        %p View replies (#{comment.id})
        - if  current_user.present? && (current_user.id == comment.user.id || current_user.is_admin?)
          %p.actions
            = link_to 'Delete', comment_path(comment.id, post_id: post.id), method: :delete, class: "delete"
